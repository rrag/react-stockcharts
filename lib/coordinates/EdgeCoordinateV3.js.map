{"version":3,"sources":["../../src/lib/coordinates/EdgeCoordinateV3.js"],"names":["renderSVG","drawOnCanvas","props","className","edge","helper","line","coordinateBase","coordinate","opacity","stroke","strokeDasharray","x1","y1","x2","y2","rectWidth","rectHeight","arrowWidth","path","orient","edgeXRect","edgeYRect","strokeOpacity","strokeWidth","fill","edgeXText","edgeYText","textAnchor","fontFamily","fontSize","textFill","displayCoordinate","show","type","edgeAt","hideLine","lineStrokeDasharray","lineStroke","lineOpacity","rectRadius","dx","dy","undefined","ctx","font","textBaseline","width","Math","round","measureText","dashArray","split","map","d","setLineDash","strokeStyle","lineWidth","beginPath","moveTo","lineTo","fillStyle","x","y","halfHeight","closePath","roundRect","rect","textAlign","fillText","height","radius","quadraticCurveTo"],"mappings":"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","file":"EdgeCoordinateV3.js","sourcesContent":["\r\n\r\nimport React from \"react\";\r\n\r\nimport { hexToRGBA, isDefined, getStrokeDasharray } from \"../utils\";\r\n\r\n/* eslint-disable react/prop-types */\r\nexport function renderSVG(props) {\r\n\tconst { className } = props;\r\n\r\n\tconst edge = helper(props);\r\n\tif (edge === null) return null;\r\n\tlet line, coordinateBase, coordinate;\r\n\r\n\tif (isDefined(edge.line)) {\r\n\t\tline = (\r\n\t\t\t<line\r\n\t\t\t\tclassName=\"react-stockcharts-cross-hair\"\r\n\t\t\t\tstrokeOpacity={edge.line.opacity}\r\n\t\t\t\tstroke={edge.line.stroke}\r\n\t\t\t\tstrokeDasharray={getStrokeDasharray(edge.line.strokeDasharray)}\r\n\t\t\t\tx1={edge.line.x1}\r\n\t\t\t\ty1={edge.line.y1}\r\n\t\t\t\tx2={edge.line.x2}\r\n\t\t\t\ty2={edge.line.y2}\r\n\t\t\t/>\r\n\t\t);\r\n\t}\r\n\tif (isDefined(edge.coordinateBase)) {\r\n\t\tconst { rectWidth, rectHeight, arrowWidth } = edge.coordinateBase;\r\n\r\n\t\tconst path =\r\n\t\t\tedge.orient === \"left\"\r\n\t\t\t\t? `M0,0L0,${rectHeight}L${rectWidth},${rectHeight}L${rectWidth +\r\n\t\t\t\t\t  arrowWidth},10L${rectWidth},0L0,0L0,0`\r\n\t\t\t\t: `M0,${arrowWidth}L${arrowWidth},${rectHeight}L${rectWidth +\r\n\t\t\t\t\t  arrowWidth},${rectHeight}L${rectWidth +\r\n\t\t\t\t\t  arrowWidth},0L${arrowWidth},0L0,${arrowWidth}`;\r\n\r\n\t\tcoordinateBase =\r\n\t\t\tedge.orient === \"left\" || edge.orient === \"right\" ? (\r\n\t\t\t\t<g\r\n\t\t\t\t\tkey={1}\r\n\t\t\t\t\ttransform={`translate(${edge.coordinateBase.edgeXRect},${\r\n\t\t\t\t\t\tedge.coordinateBase.edgeYRect\r\n\t\t\t\t\t})`}\r\n\t\t\t\t>\r\n\t\t\t\t\t<path\r\n\t\t\t\t\t\td={path}\r\n\t\t\t\t\t\tclassName=\"react-stockchart-text-background\"\r\n\t\t\t\t\t\theight={rectHeight}\r\n\t\t\t\t\t\twidth={rectWidth}\r\n\t\t\t\t\t\tstroke={edge.coordinateBase.stroke}\r\n\t\t\t\t\t\tstrokeLinejoin=\"miter\"\r\n\t\t\t\t\t\tstrokeOpacity={edge.coordinateBase.strokeOpacity}\r\n\t\t\t\t\t\tstrokeWidth={edge.coordinateBase.strokeWidth}\r\n\t\t\t\t\t\tfill={edge.coordinateBase.fill}\r\n\t\t\t\t\t\tfillOpacity={edge.coordinateBase.opacity}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</g>\r\n\t\t\t) : (\r\n\t\t\t\t<rect\r\n\t\t\t\t\tkey={1}\r\n\t\t\t\t\tclassName=\"react-stockchart-text-background\"\r\n\t\t\t\t\tx={edge.coordinateBase.edgeXRect}\r\n\t\t\t\t\ty={edge.coordinateBase.edgeYRect}\r\n\t\t\t\t\theight={rectHeight}\r\n\t\t\t\t\twidth={rectWidth}\r\n\t\t\t\t\tfill={edge.coordinateBase.fill}\r\n\t\t\t\t\topacity={edge.coordinateBase.opacity}\r\n\t\t\t\t/>\r\n\t\t\t);\r\n\r\n\t\tcoordinate = (\r\n\t\t\t<text\r\n\t\t\t\tkey={2}\r\n\t\t\t\tx={edge.coordinate.edgeXText}\r\n\t\t\t\ty={edge.coordinate.edgeYText}\r\n\t\t\t\ttextAnchor={edge.coordinate.textAnchor}\r\n\t\t\t\tfontFamily={edge.coordinate.fontFamily}\r\n\t\t\t\tfontSize={edge.coordinate.fontSize}\r\n\t\t\t\tdy=\".32em\"\r\n\t\t\t\tfill={edge.coordinate.textFill}\r\n\t\t\t>\r\n\t\t\t\t{edge.coordinate.displayCoordinate}\r\n\t\t\t</text>\r\n\t\t);\r\n\t}\r\n\treturn (\r\n\t\t<g className={className}>\r\n\t\t\t{line}\r\n\t\t\t{coordinateBase}\r\n\t\t\t{coordinate}\r\n\t\t</g>\r\n\t);\r\n}\r\n/* eslint-enable react/prop-types */\r\n\r\nfunction helper(props) {\r\n\tconst {\r\n\t\tcoordinate: displayCoordinate,\r\n\t\tshow,\r\n\t\ttype,\r\n\t\torient,\r\n\t\tedgeAt,\r\n\t\thideLine,\r\n\t\tlineStrokeDasharray\r\n\t} = props;\r\n\tconst {\r\n\t\tfill,\r\n\t\topacity,\r\n\t\tfontFamily,\r\n\t\tfontSize,\r\n\t\ttextFill,\r\n\t\tlineStroke,\r\n\t\tlineOpacity\r\n\t} = props;\r\n\tconst { stroke, strokeOpacity, strokeWidth } = props;\r\n\tconst { arrowWidth, rectWidth, rectHeight, rectRadius } = props;\r\n\tconst { x1, y1, x2, y2, dx } = props;\r\n\r\n\tif (!show) return null;\r\n\r\n\tlet coordinateBase, coordinate;\r\n\tif (isDefined(displayCoordinate)) {\r\n\t\tconst textAnchor = \"middle\"; // TODO: Below it is necessary to implement logic for the possibility of alignment from the right or from the left.\r\n\r\n\t\tlet edgeXRect, edgeYRect, edgeXText, edgeYText;\r\n\r\n\t\tif (type === \"horizontal\") {\r\n\t\t\tedgeXRect =\r\n\t\t\t\tdx + (orient === \"right\" ? edgeAt + 1 : edgeAt - rectWidth - 1);\r\n\t\t\tedgeYRect = y1 - rectHeight / 2 - strokeWidth;\r\n\t\t\tedgeXText =\r\n\t\t\t\tdx +\r\n\t\t\t\t(orient === \"right\"\r\n\t\t\t\t\t? edgeAt + rectWidth / 2\r\n\t\t\t\t\t: edgeAt - rectWidth / 2);\r\n\t\t\tedgeYText = y1;\r\n\t\t} else {\r\n\t\t\tconst dy = orient === \"bottom\" ? strokeWidth - 1 : -strokeWidth + 1;\r\n\t\t\tedgeXRect = x1 - rectWidth / 2;\r\n\t\t\tedgeYRect =\r\n\t\t\t\t(orient === \"bottom\" ? edgeAt : edgeAt - rectHeight) + dy;\r\n\t\t\tedgeXText = x1;\r\n\t\t\tedgeYText =\r\n\t\t\t\t(orient === \"bottom\"\r\n\t\t\t\t\t? edgeAt + rectHeight / 2\r\n\t\t\t\t\t: edgeAt - rectHeight / 2) + dy;\r\n\t\t}\r\n\r\n\t\tcoordinateBase = {\r\n\t\t\tedgeXRect,\r\n\t\t\tedgeYRect,\r\n\t\t\trectHeight: rectHeight + strokeWidth,\r\n\t\t\trectWidth,\r\n\t\t\trectRadius,\r\n\t\t\tfill,\r\n\t\t\topacity,\r\n\t\t\tarrowWidth,\r\n\t\t\tstroke,\r\n\t\t\tstrokeOpacity,\r\n\t\t\tstrokeWidth\r\n\t\t};\r\n\t\tcoordinate = {\r\n\t\t\tedgeXText,\r\n\t\t\tedgeYText,\r\n\t\t\ttextAnchor,\r\n\t\t\tfontFamily,\r\n\t\t\tfontSize,\r\n\t\t\ttextFill,\r\n\t\t\tdisplayCoordinate\r\n\t\t};\r\n\t}\r\n\r\n\tconst line = hideLine\r\n\t\t? undefined\r\n\t\t: {\r\n\t\t\topacity: lineOpacity,\r\n\t\t\tstroke: lineStroke,\r\n\t\t\tstrokeDasharray: lineStrokeDasharray,\r\n\t\t\tx1,\r\n\t\t\ty1,\r\n\t\t\tx2,\r\n\t\t\ty2\r\n\t\t};\r\n\r\n\treturn {\r\n\t\tcoordinateBase,\r\n\t\tcoordinate,\r\n\t\tline,\r\n\t\torient\r\n\t};\r\n}\r\n\r\nexport function drawOnCanvas(ctx, props) {\r\n\tconst { fontSize, fontFamily } = props;\r\n\r\n\tctx.font = `${fontSize}px ${fontFamily}`;\r\n\tctx.textBaseline = \"middle\";\r\n\tconst width = Math.round(ctx.measureText(props.coordinate).width + 10);\r\n\r\n\tconst edge = helper({ ...props, rectWidth: width });\r\n\r\n\tif (edge === null) return;\r\n\r\n\tif (isDefined(edge.line)) {\r\n\t\tconst dashArray = getStrokeDasharray(edge.line.strokeDasharray)\r\n\t\t\t.split(\",\")\r\n\t\t\t.map(d => +d);\r\n\t\tctx.setLineDash(dashArray);\r\n\t\tctx.strokeStyle = hexToRGBA(edge.line.stroke, edge.line.opacity);\r\n\t\tctx.lineWidth = 1;\r\n\t\tctx.beginPath();\r\n\t\tctx.moveTo(edge.line.x1, edge.line.y1);\r\n\t\tctx.lineTo(edge.line.x2, edge.line.y2);\r\n\t\tctx.stroke();\r\n\t}\r\n\r\n\tctx.setLineDash([]);\r\n\tif (isDefined(edge.coordinateBase)) {\r\n\t\tconst {\r\n\t\t\trectWidth,\r\n\t\t\trectHeight,\r\n\t\t\trectRadius,\r\n\t\t\tarrowWidth\r\n\t\t} = edge.coordinateBase;\r\n\r\n\t\tctx.fillStyle = hexToRGBA(\r\n\t\t\tedge.coordinateBase.fill,\r\n\t\t\tedge.coordinateBase.opacity\r\n\t\t);\r\n\t\tif (isDefined(edge.coordinateBase.stroke)) {\r\n\t\t\tctx.strokeStyle = hexToRGBA(\r\n\t\t\t\tedge.coordinateBase.stroke,\r\n\t\t\t\tedge.coordinateBase.strokeOpacity\r\n\t\t\t);\r\n\t\t\tctx.lineWidth = edge.coordinateBase.strokeWidth;\r\n\t\t}\r\n\r\n\t\tlet x = edge.coordinateBase.edgeXRect;\r\n\t\tconst y = edge.coordinateBase.edgeYRect;\r\n\t\tconst halfHeight = rectHeight / 2;\r\n\r\n\t\tctx.beginPath();\r\n\t\tif (edge.orient === \"right\") {\r\n\t\t\tx -= arrowWidth;\r\n\t\t\tctx.moveTo(x, y + halfHeight);\r\n\t\t\tctx.lineTo(x + arrowWidth, y);\r\n\t\t\tctx.lineTo(x + rectWidth + arrowWidth, y);\r\n\t\t\tctx.lineTo(x + rectWidth + arrowWidth, y + rectHeight);\r\n\t\t\tctx.lineTo(x + arrowWidth, y + rectHeight);\r\n\t\t\tctx.closePath();\r\n\t\t} else if (edge.orient === \"left\") {\r\n\t\t\t// x += arrowWidth;\r\n\t\t\tctx.moveTo(x, y);\r\n\t\t\tctx.lineTo(x + rectWidth, y);\r\n\t\t\tctx.lineTo(x + rectWidth + arrowWidth, y + halfHeight);\r\n\t\t\tctx.lineTo(x + rectWidth, y + rectHeight);\r\n\t\t\tctx.lineTo(x, y + rectHeight);\r\n\t\t\tctx.closePath();\r\n\t\t} else {\r\n\t\t\t// console.error(x, y, rectWidth, rectHeight)\r\n\t\t\tif (rectRadius) {\r\n\t\t\t\troundRect(ctx, x, y, rectWidth, rectHeight, 3);\r\n\t\t\t} else {\r\n\t\t\t\tctx.rect(x, y, rectWidth, rectHeight);\r\n\t\t\t}\r\n\t\t}\r\n\t\tctx.fill();\r\n\r\n\t\tif (isDefined(edge.coordinateBase.stroke)) {\r\n\t\t\tctx.stroke();\r\n\t\t}\r\n\r\n\t\tctx.fillStyle = edge.coordinate.textFill;\r\n\t\tctx.textAlign =\r\n\t\t\tedge.coordinate.textAnchor === \"middle\"\r\n\t\t\t\t? \"center\"\r\n\t\t\t\t: edge.coordinate.textAnchor;\r\n\t\tctx.fillText(\r\n\t\t\tedge.coordinate.displayCoordinate,\r\n\t\t\tedge.coordinate.edgeXText,\r\n\t\t\tedge.coordinate.edgeYText\r\n\t\t);\r\n\t}\r\n}\r\n\r\nfunction roundRect(ctx, x, y, width, height, radius) {\r\n\tctx.beginPath();\r\n\tctx.moveTo(x + radius, y);\r\n\tctx.lineTo(x + width - radius, y);\r\n\tctx.quadraticCurveTo(x + width, y, x + width, y + radius);\r\n\tctx.lineTo(x + width, y + height - radius);\r\n\tctx.quadraticCurveTo(x + width, y + height, x + width - radius, y + height);\r\n\tctx.lineTo(x + radius, y + height);\r\n\tctx.quadraticCurveTo(x, y + height, x, y + height - radius);\r\n\tctx.lineTo(x, y + radius);\r\n\tctx.quadraticCurveTo(x, y, x + radius, y);\r\n\tctx.closePath();\r\n}\r\n\r\n// export default EdgeCoordinate;\r\n"]}