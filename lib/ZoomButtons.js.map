{"version":3,"sources":["../src/lib/ZoomButtons.js"],"names":["ZoomButtons","props","handleZoomOut","bind","handleZoomIn","zoom","direction","context","xAxisZoom","xScale","plotData","xAccessor","cx","zoomMultiplier","c","domain","start","end","range","map","x","invert","newStart","newEnd","left","right","foo","i","interval","setInterval","shift","length","clearInterval","chartConfig","width","height","size","heightFromBase","rx","ry","stroke","strokeOpacity","fill","strokeWidth","fillOpacity","textFill","textStrokeWidth","onReset","centerX","Math","round","y","w","h","hLength","wLength","textY","resetX","zoomOut","zoomOutX","moveTo","lineTo","closePath","zoomIn","zoomInX","toString","propTypes","number","isRequired","array","string","fontSize","textDy","func","defaultProps","contextTypes","object"],"mappings":"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","file":"ZoomButtons.js","sourcesContent":["import React, { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\n// import { mean } from \"d3-array\";\r\n\r\nimport { path as d3Path } from \"d3-path\";\r\nimport { interpolateNumber } from \"d3-interpolate\";\r\n\r\nimport { last, noop } from \"./utils\";\r\n\r\nclass ZoomButtons extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.handleZoomOut = this.handleZoomOut.bind(this);\r\n\t\tthis.handleZoomIn = this.handleZoomIn.bind(this);\r\n\t\tthis.zoom = this.zoom.bind(this);\r\n\t}\r\n\tzoom(direction) {\r\n\t\tconst { xAxisZoom, xScale, plotData, xAccessor } = this.context;\r\n\t\tconst cx = xScale(xAccessor(last(plotData)));\r\n\t\t// mean(xScale.range());\r\n\t\tconst { zoomMultiplier } = this.props;\r\n\r\n\t\tconst c = direction > 0 ? 1 * zoomMultiplier : 1 / zoomMultiplier;\r\n\r\n\t\tconst [start, end] = xScale.domain();\r\n\t\tconst [newStart, newEnd] = xScale.range()\r\n\t\t\t.map(x => cx + (x - cx) * c)\r\n\t\t\t.map(xScale.invert);\r\n\r\n\t\tconst left = interpolateNumber(start, newStart);\r\n\t\tconst right = interpolateNumber(end, newEnd);\r\n\r\n\t\tconst foo = [0.25, 0.3, 0.5, 0.6, 0.75, 1].map(i => {\r\n\t\t\treturn [left(i), right(i)];\r\n\t\t});\r\n\r\n\t\tthis.interval = setInterval(() => {\r\n\t\t\txAxisZoom(foo.shift());\r\n\t\t\tif (foo.length === 0) {\r\n\t\t\t\tclearInterval(this.interval);\r\n\t\t\t\tdelete this.interval;\r\n\t\t\t}\r\n\t\t}, 10);\r\n\t}\r\n\thandleZoomOut() {\r\n\t\tif (this.interval) return;\r\n\t\tthis.zoom(1);\r\n\t}\r\n\thandleZoomIn() {\r\n\t\tif (this.interval) return;\r\n\t\tthis.zoom(-1);\r\n\t}\r\n\trender() {\r\n\t\tconst { chartConfig } = this.context;\r\n\t\tconst { width, height } = chartConfig;\r\n\t\tconst { size, heightFromBase, rx, ry } = this.props;\r\n\t\tconst { stroke, strokeOpacity, fill, strokeWidth, fillOpacity } = this.props;\r\n\t\tconst { textFill, textStrokeWidth } = this.props;\r\n\t\tconst { onReset } = this.props;\r\n\t\tconst centerX = Math.round(width / 2);\r\n\t\tconst y = height - heightFromBase;\r\n\r\n\t\tconst [w, h] = size;\r\n\t\tconst hLength = 5;\r\n\t\tconst wLength = 6;\r\n\r\n\t\tconst textY = Math.round(y + h / 2);\r\n\r\n\t\tconst resetX = centerX;\r\n\r\n\t\tconst zoomOut = d3Path();\r\n\t\tconst zoomOutX = centerX - w - 2 * strokeWidth;\r\n\t\tzoomOut.moveTo(zoomOutX - wLength, textY);\r\n\t\tzoomOut.lineTo(zoomOutX + wLength, textY);\r\n\t\tzoomOut.closePath();\r\n\r\n\t\tconst zoomIn = d3Path();\r\n\t\tconst zoomInX = centerX + w + 2 * strokeWidth;\r\n\r\n\t\tzoomIn.moveTo(zoomInX - wLength, textY);\r\n\t\tzoomIn.lineTo(zoomInX + wLength, textY);\r\n\r\n\t\tzoomIn.moveTo(zoomInX, textY - hLength);\r\n\t\tzoomIn.lineTo(zoomInX, textY + hLength);\r\n\t\t// zoomIn.closePath();\r\n\r\n\t\treturn (\r\n\t\t\t<g className=\"react-stockcharts-zoom-button\">\r\n\t\t\t\t<rect\r\n\t\t\t\t\tx={zoomOutX - w / 2}\r\n\t\t\t\t\ty={y}\r\n\t\t\t\t\trx={rx}\r\n\t\t\t\t\try={ry}\r\n\t\t\t\t\theight={h}\r\n\t\t\t\t\twidth={w}\r\n\t\t\t\t\tfill={fill}\r\n\t\t\t\t\tfillOpacity={fillOpacity}\r\n\t\t\t\t\tstroke={stroke}\r\n\t\t\t\t\tstrokeOpacity={strokeOpacity}\r\n\t\t\t\t\tstrokeWidth={strokeWidth}\r\n\t\t\t\t/>\r\n\t\t\t\t<path d={zoomOut.toString()}\r\n\t\t\t\t\tstroke={textFill}\r\n\t\t\t\t\tstrokeWidth={textStrokeWidth}\r\n\t\t\t\t/>\r\n\t\t\t\t<rect\r\n\t\t\t\t\tx={resetX - w / 2}\r\n\t\t\t\t\ty={y}\r\n\t\t\t\t\trx={rx}\r\n\t\t\t\t\try={ry}\r\n\t\t\t\t\theight={h}\r\n\t\t\t\t\twidth={w}\r\n\t\t\t\t\tfill={fill}\r\n\t\t\t\t\tfillOpacity={fillOpacity}\r\n\t\t\t\t\tstroke={stroke}\r\n\t\t\t\t\tstrokeOpacity={strokeOpacity}\r\n\t\t\t\t\tstrokeWidth={strokeWidth}\r\n\t\t\t\t/>\r\n\t\t\t\t<g transform={`translate (${resetX}, ${y + h / 4}) scale(.14)`}>\r\n\t\t\t\t\t<path d=\"M31 13C23.4 5.3 12.8.5 1.1.5c-23.3 0-42.3 19-42.3 42.5s18.9 42.5 42.3 42.5c13.8 0 26-6.6 33.7-16.9l-16.5-1.8C13.5 70.4 7.5 72.5 1 72.5c-16.2 0-29.3-13.2-29.3-29.4S-15.2 13.7 1 13.7c8.1 0 15.4 3.3 20.7 8.6l-10.9 11h32.5V.5L31 13z\"\r\n\t\t\t\t\t\tfill={textFill}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</g>\r\n\t\t\t\t<rect\r\n\t\t\t\t\tx={zoomInX - w / 2}\r\n\t\t\t\t\ty={y}\r\n\t\t\t\t\trx={rx}\r\n\t\t\t\t\try={ry}\r\n\t\t\t\t\theight={h}\r\n\t\t\t\t\twidth={w}\r\n\t\t\t\t\tfill={fill}\r\n\t\t\t\t\tfillOpacity={fillOpacity}\r\n\t\t\t\t\tstroke={stroke}\r\n\t\t\t\t\tstrokeOpacity={strokeOpacity}\r\n\t\t\t\t\tstrokeWidth={strokeWidth}\r\n\t\t\t\t/>\r\n\t\t\t\t<path d={zoomIn.toString()}\r\n\t\t\t\t\tstroke={textFill}\r\n\t\t\t\t\tstrokeWidth={textStrokeWidth}\r\n\t\t\t\t/>\r\n\t\t\t\t<rect className=\"react-stockcharts-enable-interaction out\"\r\n\t\t\t\t\tonClick={this.handleZoomOut}\r\n\t\t\t\t\tx={zoomOutX - w / 2}\r\n\t\t\t\t\ty={y}\r\n\t\t\t\t\trx={rx}\r\n\t\t\t\t\try={ry}\r\n\t\t\t\t\theight={h}\r\n\t\t\t\t\twidth={w}\r\n\t\t\t\t\tfill=\"none\"\r\n\t\t\t\t/>\r\n\t\t\t\t<rect className=\"react-stockcharts-enable-interaction reset\"\r\n\t\t\t\t\tonClick={onReset}\r\n\t\t\t\t\tx={resetX - w / 2}\r\n\t\t\t\t\ty={y}\r\n\t\t\t\t\trx={rx}\r\n\t\t\t\t\try={ry}\r\n\t\t\t\t\theight={h}\r\n\t\t\t\t\twidth={w}\r\n\t\t\t\t\tfill=\"none\"\r\n\t\t\t\t/>\r\n\t\t\t\t<rect className=\"react-stockcharts-enable-interaction in\"\r\n\t\t\t\t\tonClick={this.handleZoomIn}\r\n\t\t\t\t\tx={zoomInX - w / 2}\r\n\t\t\t\t\ty={y}\r\n\t\t\t\t\trx={rx}\r\n\t\t\t\t\try={ry}\r\n\t\t\t\t\theight={h}\r\n\t\t\t\t\twidth={w}\r\n\t\t\t\t\tfill=\"none\"\r\n\t\t\t\t/>\r\n\t\t\t</g>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nZoomButtons.propTypes = {\r\n\tzoomMultiplier: PropTypes.number.isRequired,\r\n\tsize: PropTypes.array.isRequired,\r\n\theightFromBase: PropTypes.number.isRequired,\r\n\trx: PropTypes.number.isRequired,\r\n\try: PropTypes.number.isRequired,\r\n\tstroke: PropTypes.string.isRequired,\r\n\tstrokeWidth: PropTypes.number.isRequired,\r\n\tstrokeOpacity: PropTypes.number.isRequired,\r\n\tfill: PropTypes.string.isRequired,\r\n\tfillOpacity: PropTypes.number.isRequired,\r\n\tfontSize: PropTypes.number.isRequired,\r\n\ttextDy: PropTypes.string.isRequired,\r\n\ttextFill: PropTypes.string.isRequired,\r\n\ttextStrokeWidth: PropTypes.number.isRequired,\r\n\tonReset: PropTypes.func,\r\n};\r\n\r\nZoomButtons.defaultProps = {\r\n\tsize: [30, 24],\r\n\theightFromBase: 50,\r\n\trx: 3,\r\n\try: 3,\r\n\tstroke: \"#000000\",\r\n\tstrokeOpacity: 0.3,\r\n\tstrokeWidth: 1,\r\n\tfill: \"#D6D6D6\",\r\n\tfillOpacity: 0.4,\r\n\tfontSize: 16,\r\n\ttextDy: \".3em\",\r\n\ttextFill: \"#000000\",\r\n\ttextStrokeWidth: 2,\r\n\tzoomMultiplier: 1.5,\r\n\tonReset: noop,\r\n};\r\n\r\nZoomButtons.contextTypes = {\r\n\txScale: PropTypes.func.isRequired,\r\n\tchartConfig: PropTypes.object.isRequired,\r\n\tplotData: PropTypes.array.isRequired,\r\n\txAccessor: PropTypes.func.isRequired,\r\n\txAxisZoom: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default ZoomButtons;\r\n"]}