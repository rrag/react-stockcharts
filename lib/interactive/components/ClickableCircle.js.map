{"version":3,"sources":["../../../src/lib/interactive/components/ClickableCircle.js"],"names":["ClickableCircle","props","saveNode","bind","renderSVG","drawOnCanvas","isHover","node","moreProps","mouseXY","r","helper","x","y","mx","my","hover","ctx","stroke","strokeWidth","fill","fillOpacity","strokeOpacity","lineWidth","fillStyle","strokeStyle","beginPath","arc","Math","PI","interactiveCursorClass","show","onDragStart","onDrag","onDragComplete","xyProvider","cx","cy","xScale","yScale","chartConfig","propTypes","func","isRequired","number","string","className","bool","defaultProps","onMove"],"mappings":"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","file":"ClickableCircle.js","sourcesContent":["import React, { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nimport GenericChartComponent from \"../../GenericChartComponent\";\r\nimport { getMouseCanvas } from \"../../GenericComponent\";\r\n\r\nimport { isDefined, noop, hexToRGBA } from \"../../utils\";\r\n\r\nclass ClickableCircle extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.saveNode = this.saveNode.bind(this);\r\n\t\tthis.renderSVG = this.renderSVG.bind(this);\r\n\t\tthis.drawOnCanvas = this.drawOnCanvas.bind(this);\r\n\t\tthis.isHover = this.isHover.bind(this);\r\n\t}\r\n\tsaveNode(node) {\r\n\t\tthis.node = node;\r\n\t}\r\n\tisHover(moreProps) {\r\n\t\tconst { mouseXY } = moreProps;\r\n\t\t// const { r } = this.props;\r\n\t\tconst r = this.props.r + 7;\r\n\t\tconst [x, y] = helper(this.props, moreProps);\r\n\r\n\t\tconst [mx, my] = mouseXY;\r\n\t\tconst hover = (x - r) < mx && mx < (x + r)\r\n\t\t\t&& (y - r) < my && my < (y + r);\r\n\r\n\t\t// console.log(\"hover->\", hover);\r\n\t\treturn hover;\r\n\t}\r\n\tdrawOnCanvas(ctx, moreProps) {\r\n\t\tconst { stroke, strokeWidth, fill } = this.props;\r\n\t\tconst { fillOpacity, strokeOpacity } = this.props;\r\n\t\tconst { r } = this.props;\r\n\r\n\t\tconst [x, y] = helper(this.props, moreProps);\r\n\r\n\t\tctx.lineWidth = strokeWidth;\r\n\t\tctx.fillStyle = hexToRGBA(fill, fillOpacity);\r\n\t\tctx.strokeStyle = hexToRGBA(stroke, strokeOpacity);\r\n\r\n\t\tctx.beginPath();\r\n\t\tctx.arc(x, y, r, 0, 2 * Math.PI, false);\r\n\t\tctx.fill();\r\n\t\tctx.stroke();\r\n\t}\r\n\trenderSVG(moreProps) {\r\n\t\tconst { stroke, strokeWidth, fill } = this.props;\r\n\t\tconst { fillOpacity, strokeOpacity } = this.props;\r\n\t\tconst { r } = this.props;\r\n\r\n\t\tconst [x, y] = helper(this.props, moreProps);\r\n\r\n\t\treturn <circle cx={x} cy={y} r={r}\r\n\t\t\tstrokeWidth={strokeWidth}\r\n\t\t\tstroke={stroke}\r\n\t\t\tstrokeOpacity={strokeOpacity}\r\n\t\t\tfill={fill}\r\n\t\t\tfillOpacity={fillOpacity}\r\n\t\t/>;\r\n\t}\r\n\trender() {\r\n\t\tconst { interactiveCursorClass } = this.props;\r\n\t\tconst { show } = this.props;\r\n\t\tconst { onDragStart, onDrag, onDragComplete } = this.props;\r\n\r\n\t\treturn show\r\n\t\t\t? <GenericChartComponent ref={this.saveNode}\r\n\t\t\t\tinteractiveCursorClass={interactiveCursorClass}\r\n\t\t\t\tselected\r\n\t\t\t\tisHover={this.isHover}\r\n\r\n\t\t\t\tonDragStart={onDragStart}\r\n\t\t\t\tonDrag={onDrag}\r\n\t\t\t\tonDragComplete={onDragComplete}\r\n\r\n\t\t\t\tsvgDraw={this.renderSVG}\r\n\r\n\t\t\t\tcanvasDraw={this.drawOnCanvas}\r\n\t\t\t\tcanvasToDraw={getMouseCanvas}\r\n\r\n\t\t\t\tdrawOn={[\"pan\", \"mousemove\", \"drag\"]}\r\n\t\t\t/>\r\n\t\t\t: null;\r\n\t}\r\n}\r\n\r\nfunction helper(props, moreProps) {\r\n\tconst { xyProvider, cx, cy } = props;\r\n\r\n\tif (isDefined(xyProvider)) {\r\n\t\treturn xyProvider(moreProps);\r\n\t}\r\n\r\n\tconst { xScale, chartConfig: { yScale } } = moreProps;\r\n\r\n\tconst x = xScale(cx);\r\n\tconst y = yScale(cy);\r\n\treturn [x, y];\r\n\r\n}\r\nClickableCircle.propTypes = {\r\n\txyProvider: PropTypes.func,\r\n\r\n\tonDragStart: PropTypes.func.isRequired,\r\n\tonDrag: PropTypes.func.isRequired,\r\n\tonDragComplete: PropTypes.func.isRequired,\r\n\tstrokeWidth: PropTypes.number.isRequired,\r\n\tstroke: PropTypes.string.isRequired,\r\n\tfill: PropTypes.string.isRequired,\r\n\tr: PropTypes.number.isRequired,\r\n\r\n\tcx: PropTypes.number,\r\n\tcy: PropTypes.number,\r\n\r\n\tclassName: PropTypes.string.isRequired,\r\n\tshow: PropTypes.bool.isRequired,\r\n\tstrokeOpacity: PropTypes.number.isRequired,\r\n\tfillOpacity: PropTypes.number.isRequired,\r\n\tinteractiveCursorClass: PropTypes.string,\r\n};\r\n\r\n\r\nClickableCircle.defaultProps = {\r\n\tclassName: \"react-stockcharts-interactive-line-edge\",\r\n\tonDragStart: noop,\r\n\tonDrag: noop,\r\n\tonDragComplete: noop,\r\n\tonMove: noop,\r\n\tshow: false,\r\n\tfillOpacity: 1,\r\n\tstrokeOpacity: 1,\r\n};\r\n\r\nexport default ClickableCircle;\r\n"]}