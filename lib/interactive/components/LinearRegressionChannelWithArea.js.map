{"version":3,"sources":["../../../src/lib/interactive/components/LinearRegressionChannelWithArea.js"],"names":["edge1Provider","edge2Provider","LinearRegressionChannelWithArea","props","renderSVG","bind","drawOnCanvas","isHover","moreProps","tolerance","onHover","mouseXY","helper","x1","y1","x2","y2","dy","yDiffs","hovering","reduce","result","diff","ctx","stroke","strokeWidth","fillOpacity","strokeOpacity","fill","lineWidth","strokeStyle","fillStyle","beginPath","moveTo","lineTo","closePath","line","toString","selected","interactiveCursorClass","onUnHover","x1Value","x2Value","type","xScale","yScale","chartConfig","fullData","xAccessor","left","right","startIndex","Math","min","endIndex","max","array","slice","xs","map","d","valueOf","ys","close","n","length","combine","x","y","xys","xSquareds","pow","b","a","newy1","newy2","stdDev","propTypes","any","isRequired","oneOf","string","number","onDragStart","func","onDrag","onDragComplete","defaultClassName","bool","defaultProps"],"mappings":"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","file":"LinearRegressionChannelWithArea.js","sourcesContent":["import React, { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { sum, deviation } from \"d3-array\";\r\nimport { path as d3Path } from \"d3-path\";\r\n\r\nimport GenericChartComponent from \"../../GenericChartComponent\";\r\nimport { getMouseCanvas } from \"../../GenericComponent\";\r\nimport { isHovering2 } from \"./StraightLine\";\r\n\r\nimport { isDefined, getClosestItemIndexes, noop, zipper, hexToRGBA } from \"../../utils\";\r\n\r\nclass LinearRegressionChannelWithArea extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\r\n\t\tthis.renderSVG = this.renderSVG.bind(this);\r\n\t\tthis.drawOnCanvas = this.drawOnCanvas.bind(this);\r\n\t\tthis.isHover = this.isHover.bind(this);\r\n\t}\r\n\tisHover(moreProps) {\r\n\t\tconst { tolerance, onHover } = this.props;\r\n\r\n\t\tif (isDefined(onHover)) {\r\n\t\t\tconst { mouseXY } = moreProps;\r\n\r\n\t\t\tconst { x1, y1, x2, y2, dy } = helper(this.props, moreProps);\r\n\t\t\tconst yDiffs = [-dy, 0, dy];\r\n\r\n\t\t\tconst hovering = yDiffs.reduce((result, diff) => result || isHovering2(\r\n\t\t\t\t[x1, y1 + diff], [x2, y2 + diff], mouseXY, tolerance\r\n\t\t\t), false);\r\n\t\t\treturn hovering;\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\tdrawOnCanvas(ctx, moreProps) {\r\n\t\tconst { stroke, strokeWidth, fillOpacity, strokeOpacity, fill } = this.props;\r\n\t\tconst { x1, y1, x2, y2, dy } = helper(this.props, moreProps);\r\n\r\n\t\tctx.lineWidth = strokeWidth;\r\n\t\tctx.strokeStyle = hexToRGBA(stroke, strokeOpacity);\r\n\t\tctx.fillStyle = hexToRGBA(fill, fillOpacity);\r\n\r\n\t\tctx.beginPath();\r\n\t\tctx.moveTo(x1, y1 - dy);\r\n\t\tctx.lineTo(x2, y2 - dy);\r\n\t\tctx.stroke();\r\n\r\n\t\tctx.beginPath();\r\n\t\tctx.moveTo(x2, y2 + dy);\r\n\t\tctx.lineTo(x1, y1 + dy);\r\n\t\tctx.stroke();\r\n\r\n\t\tctx.beginPath();\r\n\t\tctx.moveTo(x1, y1 - dy);\r\n\t\tctx.lineTo(x2, y2 - dy);\r\n\t\tctx.lineTo(x2, y2 + dy);\r\n\t\tctx.lineTo(x1, y1 + dy);\r\n\t\tctx.closePath();\r\n\t\tctx.fill();\r\n\r\n\t\tctx.beginPath();\r\n\t\tctx.moveTo(x2, y2);\r\n\t\tctx.lineTo(x1, y1);\r\n\t\tctx.stroke();\r\n\t}\r\n\trenderSVG(moreProps) {\r\n\t\tconst { stroke, strokeWidth, fillOpacity, strokeOpacity, fill } = this.props;\r\n\t\tconst { x1, y1, x2, y2, dy } = helper(this.props, moreProps);\r\n\t\tconst line = {\r\n\t\t\tstrokeWidth,\r\n\t\t\tstroke,\r\n\t\t\tstrokeOpacity,\r\n\t\t};\r\n\t\tconst ctx = d3Path();\r\n\t\tctx.moveTo(x1, y1 - dy);\r\n\t\tctx.lineTo(x2, y2 - dy);\r\n\t\tctx.lineTo(x2, y2 + dy);\r\n\t\tctx.lineTo(x1, y1 + dy);\r\n\t\tctx.closePath();\r\n\t\treturn (\r\n\t\t\t<g>\r\n\t\t\t\t<line\r\n\t\t\t\t\t{...line}\r\n\t\t\t\t\tx1={x1}\r\n\t\t\t\t\ty1={y1 - dy}\r\n\t\t\t\t\tx2={x2}\r\n\t\t\t\t\ty2={y2 - dy}\r\n\t\t\t\t/>\r\n\t\t\t\t<line\r\n\t\t\t\t\t{...line}\r\n\t\t\t\t\tx1={x1}\r\n\t\t\t\t\ty1={y1 + dy}\r\n\t\t\t\t\tx2={x2}\r\n\t\t\t\t\ty2={y2 + dy}\r\n\t\t\t\t/>\r\n\t\t\t\t<path\r\n\t\t\t\t\td={ctx.toString()}\r\n\t\t\t\t\tfill={fill}\r\n\t\t\t\t\tfillOpacity={fillOpacity}\r\n\t\t\t\t/>\r\n\t\t\t\t<line\r\n\t\t\t\t\t{...line}\r\n\t\t\t\t\tx1={x1}\r\n\t\t\t\t\ty1={y1}\r\n\t\t\t\t\tx2={x2}\r\n\t\t\t\t\ty2={y2}\r\n\t\t\t\t/>\r\n\t\t\t</g>\r\n\t\t);\r\n\t}\r\n\trender() {\r\n\t\tconst { selected, interactiveCursorClass } = this.props;\r\n\t\tconst { onHover, onUnHover } = this.props;\r\n\r\n\t\treturn <GenericChartComponent\r\n\t\t\tisHover={this.isHover}\r\n\r\n\t\t\tsvgDraw={this.renderSVG}\r\n\t\t\tcanvasToDraw={getMouseCanvas}\r\n\t\t\tcanvasDraw={this.drawOnCanvas}\r\n\r\n\t\t\tinteractiveCursorClass={interactiveCursorClass}\r\n\t\t\tselected={selected}\r\n\r\n\t\t\tonHover={onHover}\r\n\t\t\tonUnHover={onUnHover}\r\n\r\n\t\t\tdrawOn={[\"mousemove\", \"mouseleave\", \"pan\", \"drag\"]}\r\n\t\t/>;\r\n\t}\r\n}\r\n\r\nexport function edge1Provider(props) {\r\n\treturn function(moreProps) {\r\n\t\tconst { x1, y1 } = helper(props, moreProps);\r\n\t\treturn [x1, y1];\r\n\t};\r\n}\r\n\r\nexport function edge2Provider(props) {\r\n\treturn function(moreProps) {\r\n\t\tconst { x2, y2 } = helper(props, moreProps);\r\n\t\treturn [x2, y2];\r\n\t};\r\n}\r\n\r\n\r\nfunction helper(props, moreProps) {\r\n\tconst { x1Value, x2Value, type } = props;\r\n\r\n\tconst { xScale, chartConfig: { yScale }, fullData } = moreProps;\r\n\tconst { xAccessor } = moreProps;\r\n\r\n\t/*\r\n\thttp://www.metastock.com/Customer/Resources/TAAZ/?p=65\r\n\ty = a + bx\r\n\tn = length of array\r\n\tb = (n * sum(x*y) - sum(xs) * sum(ys)) / (n * sum(xSquareds) - (sum(xs) ^ 2))\r\n\ta = (sum of closes)\r\n\t*/\r\n\r\n\tconst { left } = getClosestItemIndexes(fullData, x1Value, xAccessor);\r\n\tconst { right } = getClosestItemIndexes(fullData, x2Value, xAccessor);\r\n\r\n\tconst startIndex = Math.min(left, right);\r\n\tconst endIndex = Math.max(left, right) + 1;\r\n\r\n\tconst array = fullData.slice(startIndex, endIndex);\r\n\r\n\tconst xs = array.map(d => xAccessor(d).valueOf());\r\n\tconst ys = array.map(d => d.close);\r\n\tconst n = array.length;\r\n\r\n\tconst combine = zipper()\r\n\t\t.combine((x, y) => x * y);\r\n\r\n\tconst xys = combine(xs, ys);\r\n\tconst xSquareds = xs.map(x => Math.pow(x, 2));\r\n\r\n\tconst b = (n * sum(xys) - sum(xs) * sum(ys)) / (n * sum(xSquareds) - Math.pow(sum(xs), 2));\r\n\tconst a = (sum(ys) - b * sum(xs)) / n;\r\n\r\n\tconst newy1 = a + b * x1Value;\r\n\tconst newy2 = a + b * x2Value;\r\n\r\n\tconst x1 = xScale(x1Value);\r\n\tconst y1 = yScale(newy1);\r\n\tconst x2 = xScale(x2Value);\r\n\tconst y2 = yScale(newy2);\r\n\r\n\tconst stdDev = type === \"SD\"\r\n\t\t? deviation(array, d => d.close)\r\n\t\t: 0;\r\n\r\n\tconst dy = yScale(newy1 - stdDev) - y1;\r\n\r\n\treturn {\r\n\t\tx1, y1, x2, y2, dy\r\n\t};\r\n}\r\n\r\nLinearRegressionChannelWithArea.propTypes = {\r\n\tx1Value: PropTypes.any.isRequired,\r\n\tx2Value: PropTypes.any.isRequired,\r\n\r\n\ttype: PropTypes.oneOf([\r\n\t\t\"SD\", // standard deviation channel\r\n\t\t\"Raff\", // Raff Regression Channel\r\n\t]).isRequired,\r\n\r\n\tinteractiveCursorClass: PropTypes.string,\r\n\tstroke: PropTypes.string.isRequired,\r\n\tstrokeWidth: PropTypes.number.isRequired,\r\n\tfill: PropTypes.string.isRequired,\r\n\tfillOpacity: PropTypes.number.isRequired,\r\n\tstrokeOpacity: PropTypes.number.isRequired,\r\n\r\n\tonDragStart: PropTypes.func.isRequired,\r\n\tonDrag: PropTypes.func.isRequired,\r\n\tonDragComplete: PropTypes.func.isRequired,\r\n\r\n\tonHover: PropTypes.func,\r\n\tonUnHover: PropTypes.func,\r\n\r\n\tdefaultClassName: PropTypes.string,\r\n\r\n\ttolerance: PropTypes.number.isRequired,\r\n\tselected: PropTypes.bool.isRequired,\r\n};\r\n\r\nLinearRegressionChannelWithArea.defaultProps = {\r\n\tonDragStart: noop,\r\n\tonDrag: noop,\r\n\tonDragComplete: noop,\r\n\r\n\ttype: \"SD\", // standard dev\r\n\r\n\tstrokeWidth: 1,\r\n\ttolerance: 4,\r\n\tselected: false,\r\n};\r\n\r\nexport default LinearRegressionChannelWithArea;"]}