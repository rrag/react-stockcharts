{"version":3,"sources":["../../src/lib/interactive/utils.js"],"names":["getValueFromOverride","terminate","saveNodeType","isHoverForInteractiveType","isHover","getMorePropsForChart","getSelected","override","index","key","defaultValue","setState","current","type","node","nodes","interactiveType","moreProps","selecedNodes","map","interactive","props","t","idx","selected","hovering","reduce","a","b","getMouseXY","ox","oy","Array","isArray","mouseXY","x","y","chartId","chartConfigList","chartConfig","each","id","origin","interactives","objects","filter","obj","length"],"mappings":"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","file":"utils.js","sourcesContent":["import {\r\n\tisNotDefined,\r\n\tisDefined,\r\n\tmapObject,\r\n\tfind,\r\n} from \"../utils\";\r\n\r\nexport function getValueFromOverride(override, index, key, defaultValue) {\r\n\tif (isDefined(override) && override.index === index)\r\n\t\treturn override[key];\r\n\treturn defaultValue;\r\n}\r\n\r\nexport function terminate() {\r\n\tthis.setState({\r\n\t\tcurrent: null,\r\n\t\toverride: null,\r\n\t});\r\n}\r\n\r\nexport function saveNodeType(type) {\r\n\treturn node => {\r\n\t\tif (isNotDefined(node) && isDefined(this.nodes[type])) {\r\n\t\t\tdelete this.nodes[type];\r\n\t\t} else {\r\n\t\t\tthis.nodes[type] = node;\r\n\t\t}\r\n\t\t// console.error(this.nodes)\r\n\t};\r\n}\r\nexport function isHoverForInteractiveType(interactiveType) {\r\n\treturn function(moreProps) { // this has to be function as it is bound to this\r\n\r\n\t\tif (isDefined(this.nodes)) {\r\n\t\t\tconst selecedNodes = this.nodes\r\n\t\t\t\t.map(node => node.isHover(moreProps));\r\n\t\t\tconst interactive = this.props[interactiveType].map((t, idx) => {\r\n\t\t\t\treturn {\r\n\t\t\t\t\t...t,\r\n\t\t\t\t\tselected: selecedNodes[idx]\r\n\t\t\t\t};\r\n\t\t\t});\r\n\t\t\treturn interactive;\r\n\t\t}\r\n\t};\r\n}\r\n\r\nexport function isHover(moreProps) {\r\n\tconst hovering = mapObject(this.nodes, node => node.isHover(moreProps))\r\n\t\t.reduce((a, b) => {\r\n\t\t\treturn a || b;\r\n\t\t});\r\n\treturn hovering;\r\n}\r\n\r\nfunction getMouseXY(moreProps, [ox, oy]) {\r\n\tif (Array.isArray(moreProps.mouseXY)) {\r\n\t\tconst { mouseXY: [x, y] } = moreProps;\r\n\t\tconst mouseXY = [\r\n\t\t\tx - ox,\r\n\t\t\ty - oy\r\n\t\t];\r\n\t\treturn mouseXY;\r\n\t}\r\n\treturn moreProps.mouseXY;\r\n}\r\n\r\nexport function getMorePropsForChart(moreProps, chartId) {\r\n\tconst { chartConfig: chartConfigList } = moreProps;\r\n\tconst chartConfig = find(chartConfigList, each => each.id === chartId);\r\n\r\n\tconst { origin } = chartConfig;\r\n\tconst mouseXY = getMouseXY(moreProps, origin);\r\n\treturn {\r\n\t\t...moreProps,\r\n\t\tchartConfig,\r\n\t\tmouseXY,\r\n\t};\r\n}\r\n\r\nexport function getSelected(interactives) {\r\n\tconst selected = interactives\r\n\t\t.map(each => {\r\n\t\t\tconst objects = each.objects.filter(obj => {\r\n\t\t\t\treturn obj.selected;\r\n\t\t\t});\r\n\t\t\treturn {\r\n\t\t\t\t...each,\r\n\t\t\t\tobjects,\r\n\t\t\t};\r\n\t\t})\r\n\t\t.filter(each => each.objects.length > 0);\r\n\treturn selected;\r\n}\r\n"]}