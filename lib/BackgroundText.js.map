{"version":3,"sources":["../src/lib/BackgroundText.js"],"names":["BackgroundText","context","chartCanvasType","getCanvasContexts","contexts","drawOnCanvas","bg","props","children","componentDidMount","x","y","fill","opacity","stroke","strokeOpacity","fontFamily","fontSize","textAnchor","ctx","getText","interval","clearRect","canvas","width","height","save","setTransform","translate","text","strokeStyle","font","fillStyle","textAlign","strokeText","fillText","restore","propTypes","number","isRequired","string","func","defaultProps","contextTypes"],"mappings":"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","file":"BackgroundText.js","sourcesContent":["import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport PureComponent from \"./utils/PureComponent\";\r\n\r\nimport { hexToRGBA, isDefined } from \"./utils\";\r\n\r\nclass BackgroundText extends PureComponent {\r\n\tcomponentDidMount() {\r\n\t\tif (this.context.chartCanvasType !== \"svg\" && isDefined(this.context.getCanvasContexts)) {\r\n\t\t\tconst contexts = this.context.getCanvasContexts();\r\n\t\t\tif (contexts) BackgroundText.drawOnCanvas(contexts.bg, this.props, this.context, this.props.children);\r\n\t\t}\r\n\t}\r\n\tcomponentDidUpdate() {\r\n\t\tthis.componentDidMount();\r\n\t}\r\n\trender() {\r\n\t\tconst { chartCanvasType } = this.context;\r\n\r\n\t\tif (chartCanvasType !== \"svg\") return null;\r\n\r\n\t\tconst { x, y, fill, opacity, stroke, strokeOpacity, fontFamily, fontSize, textAnchor } = this.props;\r\n\t\tconst props = { x, y, fill, opacity, stroke, strokeOpacity, fontFamily, fontSize, textAnchor };\r\n\t\treturn (\r\n\t\t\t<text {...props}>this.props.children(interval)</text>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nBackgroundText.drawOnCanvas = (ctx, props, { interval }, getText) => {\r\n\tctx.clearRect(-1, -1, ctx.canvas.width + 2, ctx.canvas.height + 2);\r\n\tctx.save();\r\n\r\n\tctx.setTransform(1, 0, 0, 1, 0, 0);\r\n\tctx.translate(0.5, 0.5);\r\n\r\n\tconst { x, y, fill, opacity, stroke, strokeOpacity, fontFamily, fontSize, textAnchor } = props;\r\n\r\n\tconst text = getText(interval);\r\n\r\n\tctx.strokeStyle = hexToRGBA(stroke, strokeOpacity);\r\n\r\n\tctx.font = `${ fontSize }px ${ fontFamily }`;\r\n\tctx.fillStyle = hexToRGBA(fill, opacity);\r\n\tctx.textAlign = textAnchor === \"middle\" ? \"center\" : textAnchor;\r\n\r\n\tif (stroke !== \"none\") ctx.strokeText(text, x, y);\r\n\tctx.fillText(text, x, y);\r\n\r\n\tctx.restore();\r\n};\r\n\r\nBackgroundText.propTypes = {\r\n\tx: PropTypes.number.isRequired,\r\n\ty: PropTypes.number.isRequired,\r\n\tfontFamily: PropTypes.string,\r\n\tfontSize: PropTypes.number.isRequired,\r\n\tfill: PropTypes.string,\r\n\tstroke: PropTypes.string,\r\n\topacity: PropTypes.number,\r\n\tstrokeOpacity: PropTypes.number,\r\n\ttextAnchor: PropTypes.string,\r\n\tchildren: PropTypes.func,\r\n};\r\n\r\nBackgroundText.defaultProps = {\r\n\topacity: 0.3,\r\n\tfill: \"#9E7523\",\r\n\tstroke: \"#9E7523\",\r\n\tstrokeOpacity: 1,\r\n\tfontFamily: \"Helvetica Neue, Helvetica, Arial, sans-serif\",\r\n\tfontSize: 12,\r\n\ttextAnchor: \"middle\",\r\n};\r\n\r\nBackgroundText.contextTypes = {\r\n\tinterval: PropTypes.string.isRequired,\r\n\tgetCanvasContexts: PropTypes.func,\r\n\tchartCanvasType: PropTypes.string,\r\n};\r\n\r\nexport default BackgroundText;"]}